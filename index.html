<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Our Blood Moon</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: black;
      overflow: hidden;
      color: white;
      font-family: 'Georgia', serif;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }

    /* Tooltip styling */
    .tooltip {
      position: fixed;
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 6px 10px;
      border-radius: 6px;
      font-size: 0.9rem;
      pointer-events: none;
      white-space: nowrap;
      opacity: 0;
      transition: opacity 0.2s ease;
      z-index: 20;
    }

    .counter {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1rem;
      opacity: 0.85;
      z-index: 5;
    }
  </style>
</head>
<body>
  <!-- Two canvases: one for static stars, one for animated blood moon -->
  <canvas id="stars"></canvas>
  <canvas id="moon"></canvas>

  <div class="tooltip" id="tooltip"></div>
  <div class="counter" id="counter"></div>

  <script>
    const starCanvas = document.getElementById('stars');
    const starCtx = starCanvas.getContext('2d');
    const moonCanvas = document.getElementById('moon');
    const moonCtx = moonCanvas.getContext('2d');
    const tooltip = document.getElementById("tooltip");

    starCanvas.width = moonCanvas.width = window.innerWidth;
    starCanvas.height = moonCanvas.height = window.innerHeight;

    // Messages
    const messages = [
      "You are my universe ",
      "Every night since the blood moon I have fallen deeper and deeper for you",
      "You are the prettiest girl in the world",
      "I see forever with you under the stars",
      "I love you with my whole heart",
      "Every day I fall harder"
    ];

    // Shuffle messages
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    const shuffledMessages = shuffle([...messages]);

    // Stars
    const stars = [];
    for (let i = 0; i < shuffledMessages.length; i++) {
      stars.push({
        x: Math.random() * starCanvas.width,
        y: Math.random() * starCanvas.height,
        radius: Math.random() * 3 + 2,
        message: shuffledMessages[i]
      });
    }

    // Draw stars
    function drawStars() {
      starCtx.clearRect(0, 0, starCanvas.width, starCanvas.height);
      for (let star of stars) {
        starCtx.beginPath();
        starCtx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
        starCtx.fillStyle = "white";
        starCtx.shadowBlur = 10;
        starCtx.shadowColor = "white";
        starCtx.fill();
      }
    }
    drawStars();

    // Moon animation
    let moonX = -150;
    let moonY = moonCanvas.height / 3;
    const moonRadius = 120;
    const moonSpeed = 0.3;
    let glowPulse = 0;

    function drawMoon() {
      moonCtx.clearRect(0, 0, moonCanvas.width, moonCanvas.height);

      glowPulse += 0.05;
      let pulse = Math.sin(glowPulse) * 40 + 100;

      const gradient = moonCtx.createRadialGradient(moonX, moonY, 10, moonX, moonY, moonRadius);
      gradient.addColorStop(0, "#ff4d4d");
      gradient.addColorStop(1, "#330000");

      moonCtx.beginPath();
      moonCtx.arc(moonX, moonY, moonRadius, 0, Math.PI * 2);
      moonCtx.fillStyle = gradient;
      moonCtx.shadowColor = "red";
      moonCtx.shadowBlur = pulse;
      moonCtx.fill();
      moonCtx.closePath();

      moonX += moonSpeed;
      if (moonX - moonRadius > moonCanvas.width) {
        moonX = -moonRadius;
      }

      requestAnimationFrame(drawMoon);
    }
    drawMoon();

    // Hover tooltips for stars
    starCanvas.addEventListener("mousemove", (e) => {
      const mouseX = e.clientX;
      const mouseY = e.clientY;
      let found = false;

      for (let star of stars) {
        const dx = mouseX - star.x;
        const dy = mouseY - star.y;
        if (Math.sqrt(dx*dx + dy*dy) < star.radius + 6) {
          tooltip.textContent = star.message;
          tooltip.style.left = (mouseX + 15) + "px";
          tooltip.style.top = (mouseY - 10) + "px";
          tooltip.style.opacity = 1;
          found = true;
          break;
        }
      }
      if (!found) {
        tooltip.style.opacity = 0;
      }
    });

    // Counter
    function updateCounter() {
      const startDate = new Date("2025-09-07");
      const today = new Date();
      const diffTime = Math.abs(today - startDate);
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      document.getElementById("counter").textContent = 
        `🌙 Since 7th September 2025: ${diffDays} days together ❤️`;
    }
    updateCounter();

    // Resize handling
    window.addEventListener("resize", () => {
      starCanvas.width = moonCanvas.width = window.innerWidth;
      starCanvas.height = moonCanvas.height = window.innerHeight;
      drawStars();
    });
  </script>
</body>
</html>
